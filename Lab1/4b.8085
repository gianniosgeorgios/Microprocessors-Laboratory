;Αρχική κατάσταση

MVI A,80H
CMA 
STA 3000H	;Εμφάνισε το αρχικό αποτέλεσμα (Βαγονέτο τέρμα αριστερά)		
CMA

MOV E,A	;Ε,προσωρινός καταχωρητής

LXI B,01F4H	;500msec για DELB

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
GO_RIGHT_ΜSB_IS_ON:		;Κατάσταση 01 

LDA 2000H			;Δίαβασμα LSB διακόπτη 
ANI 01H			;Όσο είναι OFF
CPI 01H			;Ξαναδίαβασε διακόπτες
JNZ GO_RIGHT_ΜSB_IS_ON  



MOV A,E			;Ενημέρωση καταχωρητή Α
RRC				;Δεξία ολίσθηση
CALL DELB
CMA
STA 3000H			;Εμφάνισης αποτελέσματος
CMA

MOV E,A 			;Αποθήκευσε στον Ε την κατάσταση του Α	

READ_MSB:
LDA 2000H			;Δίαβασε την κατάσταση των διακοπτών 
ANI 80H
ADD E				;Πρόσθεσε την κατάσταση του Α
ANI 81H			;Απομόνωσε πρώτο και τελευταιο ψηφίο 	

CPI 00H			;Οχι άκρη,διακόπτησ OFF
JZ GO_LEFT_MSB_IS_OFF	;κατάσταση 10 

CPI 81H			;Ακρη,διακόπτης ON
JZ GO_LEFT_MSB_IS_ON 	;κατάσταση 11 

CPI 01H			;Aκρη,διακόπτης OFF 
JZ READ_MSB 			;κατάσταση STOP
				;Οχι ακρη διακόπτης,διακόπτης ON 
JMP GO_RIGHT_ΜSB_IS_ON

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
GO_LEFT_MSB_IS_ON:		;Κατάσταση 11 

LDA 2000H			;Δίαβασμα LSB διακόπτη 
ANI 01H			;Όσο είναι OFF
CPI 01H			;Ξαναδίαβασε διακόπτες
JNZ GO_LEFT_MSB_IS_ON  


MOV A,E			;Ενημέρωση καταχωρητή Α

RLC				;Αριστερή ολίσθηση
CALL DELB
CMA 
STA 3000H			;Εμφάνισης αποτελέσματος
CMA 

MOV E,A			;Αποθήκευσε στον Ε την κατάσταση του Α	

READ_MSB_2:
LDA 2000H			;Δίαβασε την κατάσταση των διακοπτών
ANI 80H
RLC
ANI 01H			;Ελενξε αν έφτασε στην άκρη 
ADD E				;Πρόσθεσε την κατάσταση του Α

ANI 81H			;Απομόνωσε πρώτο και τελευταιο ψηφίο 	

CPI 00H			;Οχι άκρη,διακόπτησ OFF
JZ GO_RIGHT_MSB_IS_OFF	;Κατάσταση 00

CPI 81H			;Aκρη,διακόπτης ON
JZ GO_RIGHT_ΜSB_IS_ON	;Κατάσταση 01

CPI 80H			;Aκρη, διακόπτης OFF
JZ READ_MSB_2			;Κατάσταση STOP
				;Όχι Aκρη,διακόπτης ON
JMP GO_LEFT_MSB_IS_ON	;Κατάσταση 11



;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
GO_LEFT_MSB_IS_OFF:		;Κατάσταση 10 

LDA 2000H			;Δίαβασμα LSB διακόπτη 
ANI 01H 			;Όσο είναι OFF
CPI 01H			;Ξαναδίαβασε διακόπτες
JNZ GO_LEFT_MSB_IS_OFF


MOV A,E			;Ενημέρωση καταχωρητή Α

RLC				;Αριστερή ολίσθηση

CALL DELB
CMA 
STA 3000H			;Εμφάνισης αποτελέσματος
CMA 

MOV E,A			;Σώσε τη θέση του βαγονέτου 

READ_MSB_3:
LDA 2000H			;Δίαβασε την κατάσταση των διακοπτών
ANI 80H
RLC
ADD E				;Προστίθεται η πληροφορία για θέση 

ANI 81H			;Απομόνωσε πρώτο και τελευταιο ψηφίο 	

CPI 80H			;Aκρη,διακόπτης OFF
JZ GO_RIGHT_MSB_IS_OFF	;Κατάσταση 00

CPI 81H			;Aκρη,διακόπτης ON
JZ READ_MSB_3 		;Κατάσταση STOP

CPI 01H			;Όχι άκρη, διακόπτης ON
JZ GO_RIGHT_ΜSB_IS_ON	;Kατάσταση 01

				;Όχι άκρη,διακόπτης OFF
JMP GO_LEFT_MSB_IS_OFF	;κατάσταση 10

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
GO_RIGHT_MSB_IS_OFF:		;Κατάσταση 00

LDA 2000H			;Δίαβασμα LSB διακόπτη 
ANI 01H			;Όσο είναι OFF
CPI 01H			;Ξαναδίαβασε διακόπτες
JNZ GO_RIGHT_MSB_IS_OFF



MOV A,E			;Ενημέρωση καταχωρητή Α
RRC				;Σώσε τη θέση του βαγονέτου 

CALL DELB
CMA
STA 3000H			;Εμφάνισης αποτελέσματος
CMA

MOV E,A 			;Αποθήκευσε στον Ε την κατάσταση του Α	

READ_MSB_4:
LDA 2000H			;Δίαβασε την κατάσταση των διακοπτών 
ANI 80H
ADD E				;Πρόσθεσε την κατάσταση του Α
ANI 81H			;Απομόνωσε πρώτο και τελευταιο ψηφίο 	

CPI 80H			;Οχι άκρη,διακόπτησ ΟΝ
JZ GO_LEFT_MSB_IS_ON		;;Κατάσταση 11

CPI 81H			;Ακρη,διακόπτης ON
JZ READ_MSB_4			;Κατάσταση STOP

CPI 01H			;Aκρη,διακόπτης OFF 
JZ GO_LEFT_MSB_IS_OFF	;Κατάσταση 10
				
				;Οχι άκρη,διακόπτησ OFF	
JMP GO_RIGHT_MSB_IS_OFF	;Κατάσταση 00


END

		

